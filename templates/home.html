{% extends "layout.html" %}

{% block title %}
    Content Generator
{% endblock %}

{% block main %}
<script async defer>
    window.addEventListener("DOMContentLoaded", (event) => {
        let loading = document.getElementsByClassName('loading');
        document.getElementById('generate').addEventListener('submit', function(e) {
            e.preventDefault();
            for (let i = 0; i < loading.length; i++) {
                loading[i].removeAttribute("hidden");
            }
            this.submit();
        });
    });
    
</script>
<div class="container">

    {% for msg in get_flashed_messages()  %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{msg}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </button>
    </div>
    {% endfor %}

</div>
<form action="/" method="post" class="mx-5" enctype="multipart/form-data" id="generate">
    <div class="row">
        <div class="col-sm-3">
            <h2 class="display-6">Image Generation</h2>
        </div>
        <div class="col-sm-3">
            <div class="spinner-border text-primary loading mt-2" role="status" hidden>
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    <div class="form-floating mb-3">
        <textarea class="form-control" placeholder="Enter prompt to generate image" id="floatingTextarea" name="image_prompt"></textarea>
        <label for="floatingTextarea">Image Prompt</label>
    </div>
    <!-- <h4>Optional</h4>
    <div class="form-floating mt-3">
        <textarea class="form-control" placeholder="Input elements to avoid in generated image" id="floatingTextarea" name="negative_prompt"></textarea>
        <label for="floatingTextarea">Negative Image Prompt</label>
    </div> -->
    <div class="row">
        <div class="col-sm-3">
            <h2 class="display-6 mt-3">Video Generation</h2>
        </div>
        <div class="col-sm-3">
            <div class="spinner-border text-primary loading mt-4" role="status" hidden>
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    <div class="form-floating mt-3">
        <textarea class="form-control" placeholder="Enter prompt to generate video" id="floatingTextarea" name="video_prompt"></textarea>
        <label for="floatingTextarea">Video Prompt</label>
    </div>
    <div class="row">
        <div class="col-sm-3">
            <h2 class="mt-3 display-6">Speech Generation</h2>
        </div>
        <div class="col-sm-4">
            <div class="spinner-border text-primary loading mt-4 mx-4" role="status" hidden>
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    <div class="form-floating mb-3 mt-3">
        <input type="text" name="speech_prompt" class="form-control" id="floatingInput" placeholder="Script for generated speech">
        <label for="floatingInput">Speech Prompt</label>
    </div>
    <h4>Optional (Choose either 1 or 2)</h4>
    <div class="input-group">
        <div class="col-sm-1">
            <img src="static/assets/one.png" width="80" height="80">
        </div>
        <div class="col mt-2">
            <label class="input-group-text" for="inputGroupSelect01">Languages</label>
            <select class="form-select" id="inputGroupSelect01" name="language">
                <option selected value="">Choose...</option>
                <option value="English">English</option>
                <option value="Chinese (Mandarin, 普通话)">Chinese</option>
                <option value="Cantonese (粤语)">Cantonese (No Male or Female option and unable to Change Audio in Results page)</option>
            </select>  
        </div>
        <div class="col mt-2">
            <label class="input-group-text" for="inputGroupSelect01">Gender</label>
            <select class="form-select" id="inputGroupSelect01" name="gender">
                <option selected value="">Choose...</option>
                <option value="M">Male</option>
                <option value="F">Female</option>
            </select>  
        </div>
    </div>
    <div class="input-group">
        <div class="col-sm-1">
            <img src="static/assets/two.png" width="80" height="80">
        </div>
        <div class="col mt-2">
            <input class="form-control form-control-lg mt-1" id="formFileLg" type="file" name="voice_file" accept="audio/*">
        </div>
        <div class="col-sm-1 mt-2">
            <h5 class="text-center mt-3">OR</h5>
        </div>
        <div class="col mt-2">
            <div class="form-floating">
                <input type="url" name="voice_url" class="form-control" id="floatingInput" placeholder=".wav">
                <label for="floatingInput">URL</label>
            </div>
        </div>
    </div>
        <input type="submit" class="mt-2 btn btn-primary shadow p-2 rounded">
</form>
{% endblock %}